<!DOCTYPE = HTML>
<html>
	<head>
		<style>
			canvas {

				background-color : #f0e0d0;
			}
		</style>
		<title>mlp logical</title>
		<script src="arr.js" type="text/javascript"></script>
		<script src="mlp.js" type="text/javascript"></script>
	</head>
	<body>

		<p id='error'>
			error:
		</p>

		<canvas id="myCanvas" width="640" height="400" style="border : 1px solid #d3d3d3; position:relative; width : 100%; height:95%">
<!--		<canvas id="myCanvas" width="640" height="400" style="border:1px solid #d3d3d3;">-->

			Your browser does not support the HTML5 canvas tag.
		</canvas>

		<script type="text/javascript">

			var
			mlp = new MLP ( [ 2, 3, 1 ], 0, 1, .25 );

			var
			p = [
				[ 0, 0 ],
				[ 0, 1 ],
				[ 1, 0 ],
				[ 1, 1 ]
			],
			t = [
				[ 1 ],
				[ 0 ],
				[ 0 ],
				[ 1 ]
			];

			var
			c   = document.getElementById ( "myCanvas" ),
			ctx = c.getContext ( "2d" ),
			col = [ "red", "yellow", "green", "blue", "black" ],
			loop = 0,
			paintGrid = function ( ) {

				var
				exp_ = 1,
				f_ = 50 / Math.log( 10 );

				for ( var j = 0; j < 9; ++ j ) {

					ctx.beginPath ( );
					ctx.moveTo( 10,  10 - Math.log( exp_ ) * f_ );
					ctx.lineTo( 630, 10 - Math.log( exp_ ) * f_ );
					ctx.strokeStyle = "gray";
					ctx.stroke( );
					exp_ *= .1;
				}

			},
			paintErr = function ( ) {

				var
				e_ = mlp.rms ( ),
				f_ = 50 / Math.log( 10 );

				document.getElementById( "error" ).innerHTML = ( "E = " + e_ );

				ctx.beginPath ( );
				ctx.moveTo ( 10,  10 - Math.log( e_ ) * f_ );
				ctx.lineTo ( 630, 10 - Math.log( e_ ) * f_ );
				ctx.strokeStyle = col[ 4 ];
				ctx.stroke ( );
			},
			doLoops = function ( pI_loops ) {

				for ( var l = 0; l < pI_loops; ++ l ) {

					var
					i = parseInt( 4 * Math.random ( ) );

					mlp.remember( p[ i ] );
					mlp.teach ( t[ i ] );
				}

				loop += pI_loops;
			},
			timer = function ( ) {

				requestAnimationFrame( timer );

				paintGrid ( );

				paintErr ( );

				doLoops ( 100 );

				if ( 1e6 < loops ) loops = 0;
			}

			timer ( );

		</script>

	</body>
</html>
