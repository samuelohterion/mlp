<!DOCTYPE = HTML>
<html>
	<head>
		<style>
			canvas {

				background-color : #f0f8ff;
			}
		</style>
		<title>
			statistics with closures
		</title>
		<script src="arr.js" type="text/javascript">
		</script>
	</head>
	<body>

		<p id='text'>
			text:
		</p>

		<script type="text/javascript">

			function pr ( p_text ) { console.log ( p_text ); }

			function dnorm ( pD_mu, pD_sigma, pD_dx ) {

				return function ( x ) {

					return dx * Math.exp ( - ( x - pD_mu ) * ( x - pD_mu ) / ( 2. * pD_sigma * pD_sigma ) ) / ( Math.sqrt ( 2. * Math.PI ) * pD_sigma );
				}
			}

			function mean ( p, x ) {

				return cum ( rAdd, rel ( rMul, p, x ) );
			}

			function variance ( p, x ) {

				return mean ( p, fun ( sSqr, rel ( rSub, x, mean ( p, x ) ) ) );
			}

			function sigma ( p, x ) {

				return Math.sqrt ( variance ( p, x ) );
			}

			var
			dx  = .1,
			x   = seq ( -500, +501, pol ( [ 0, dx ] ) );
			p   = fun ( dnorm ( Math.PI, Math.E, dx ), x ),
			nrm = cum ( rAdd, p );

			pr ( nrm );
			pr ( mean ( p, x ) );
			pr ( variance ( p, x ) );
			pr ( sigma ( p, x ) );

			rel ( rDiv,  p, nrm, p );

			nrm = cum ( rAdd, p );

			pr ( nrm );
			pr ( mean ( p, x ) );
			pr ( variance ( p, x ) );
			pr ( sigma ( p, x ) );

			var
			z = rel ( rDiv, rel ( rSub, x, mean ( p, x ) ), sigma ( p, x ) );

			pr ( mean ( p, z ) );
			pr ( variance ( p, z ) );
			pr ( sigma ( p, z ) );


		</script>

	</body>
</html>
