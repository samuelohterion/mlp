<!DOCTYPE = HTML>
<html>

	<head>

		<style>

		</style>

		<title>

			arr.example

		</title>

		<script type="text/javascript">

			function cst ( p_val ) {

				return function ( i ) {

					return p_val;
				};
			}

			function add ( p_val ) {

				return function ( i ) {

					return p_val + i;
				};
			}

			function pol ( pA_coeff ) {

				return function ( i ) {

					var
					r = 0,
					e = -1,
					p = 1;

					while ( ++ e < pA_coeff.length ) {

						r += pA_coeff[ e ] * p;
						p *= i;
					}

					return r;
				};
			}

			function arr ( pI_size, pFct_fct = cst ( 0 ) ) {

				var
				r = [ ];

				for ( var i = 0; i < pI_size; ++ i )

					r.push ( pFct_fct ( i ) );

				return r;
			}

			function seq ( pI_begin, pI_end, pFct_fct = add ( 0 ) ) {

				var
				r = [ ];

				for ( var i = pI_begin; i < pI_end; ++ i )

					r.push ( pFct_fct ( i ) );

				return r;
			}

			function fun ( pFct_fct, pA_src ) {

				var
				r   = [ ];

				for ( var i = 0; i < pA_src.length; ++ i )

					r.push ( pFct_fct( pA_src[ i ] ) );

				return r;
			}

			function nuf ( pA_dst, pFct_fct, pA_src ) {

				for ( var i = 0; i < pA_dst.length; ++ i )

					pA_dst[ i ] = pFct_fct ( pA_src[ i ] );

				return pA_dst;
			}

			function rel ( pFct_fct, pA_src1, pA_src2 ) {

				var
				r   = [ ],
				len = pA_src1.length < pA_src2.length ? pA_src1.length : pA_src2.length;

				for ( var i = 0; i < len; ++ i )

					r.push ( pFct_fct( pA_src1[ i ], pA_src2[ i ] ) );

				return r;
			}

			function ler ( pA_dst, pFct_fct, pA_src1, pA_src2 ) {

				for ( var i = 0; i < pA_dst.length; ++ i )

					pA_dst[ i ] = pFct_fct( pA_src1[ i ], pA_src2[ i ] );

				return pA_dst;
			}

			function cum ( pFct_fct, pA_src ) {

				var
				i = 0,
				r = pA_src[ i ];

				while ( ++ i < pA_src.length )

					r = pFct_fct( r, pA_src[ i ] );

				return r;
			}

		</script>

	</head>

	<body>

		<script type="text/javascript">

			function pr ( p_text ) { console.log ( p_text ); }

			function sSet ( a ) { return a; }

			function sSqr ( a ) { return a * a; }

			function rMul ( a, b ) { return a * b; }

			function rAdd ( a, b ) { return a + b; }

			function round ( a, b = 2 ) { return Math.pow( 10, -b ) * Math.round ( a * Math.pow ( 10, b ) ); }

			var
			u  = arr ( 1e1, add ( 0 ) ),
			v  = arr ( 1e1, cst ( 2 ) ),
			t0 = ( new Date ( ) ).getTime ( ),
			w  = fun ( sSqr, u ),
			t1 = ( new Date ( ) ).getTime ( );

			nuf ( v, sSqr, u );

			var
			t2 = ( new Date ( ) ).getTime ( ),
			w  = rel ( rMul, u, v ),
			t3 = ( new Date ( ) ).getTime ( );

			ler ( w, rMul, u, v );

			var
			t4 = ( new Date ( ) ).getTime ( ),
			s0 = cum ( rAdd, rel ( rMul, u, v ) ),
			t5 = ( new Date ( ) ).getTime ( ),
			s1 = cum ( rAdd, ler ( w, rMul, u, v ) ),
			t6 = ( new Date ( ) ).getTime ( );

			alert (
				"dt10: " + ( t1 - t0 ) + "ms\ndt21: " + ( t2 - t1 ) +"ms\n" + round( ( t1 - t0 ) / ( t2 - t1 ) - 1, 2 ) + " x times faster\n" +
				"dt32: " + ( t3 - t2 ) + "ms\ndt43: " + ( t4 - t3 ) +"ms\n" + round( ( t3 - t2 ) / ( t4 - t3 ) - 1, 2 ) + " x times faster\n" +
				"dt54: " + ( t5 - t4 ) + "ms\ndt65: " + ( t6 - t5 ) +"ms\n" + round( ( t5 - t4 ) / ( t6 - t5 ) - 1, 2 ) + " x times faster\n" );

			for ( var loop = 0; loop < 1; ++ loop ) {

				t0 = ( new Date ( ) ).getTime ( );
				w  = fun ( sSqr, u );
				t1 = ( new Date ( ) ).getTime ( );

				nuf ( v, sSqr, u );

				t2 = ( new Date ( ) ).getTime ( );
				w  = rel ( rMul, u, v );
				t3 = ( new Date ( ) ).getTime ( );

				ler ( w, rMul, u, v );

				t4 = ( new Date ( ) ).getTime ( );
				s0 = cum ( rAdd, rel ( rMul, u, v ) );
				t5 = ( new Date ( ) ).getTime ( );
				s1 = cum ( rAdd, ler ( w, rMul, u, v ) );
				t6 = ( new Date ( ) ).getTime ( );

				alert (
					"dt10: " + ( t1 - t0 ) + "ms\ndt21: " + ( t2 - t1 ) +"ms\n" + round( ( t1 - t0 ) / ( t2 - t1 ) - 1, 2 ) + " x times faster\n" +
					"dt32: " + ( t3 - t2 ) + "ms\ndt43: " + ( t4 - t3 ) +"ms\n" + round( ( t3 - t2 ) / ( t4 - t3 ) - 1, 2 ) + " x times faster\n" +
					"dt54: " + ( t5 - t4 ) + "ms\ndt65: " + ( t6 - t5 ) +"ms\n" + round( ( t5 - t4 ) / ( t6 - t5 ) - 1, 2 ) + " x times faster\n" );

				pr ( w );

				// factorial of 5
				pr ( cum ( rMul, seq( 5, add ( 1 ) ) ) );

				// sum of first 5 squares

				pr ( cum ( rAdd, fun( sSqr, arr ( 5, add ( 1 ) ) ) ) );
				pr ( cum ( rAdd, fun( sSqr, seq ( 1, 6 ) ) ) );
				pr ( cum ( rAdd, seq ( 1, 6, sSqr ) ) );

				pr ( seq ( 0, 21, pol ( [ +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ +1, +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ +1, +2, +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ +1, +3, +3, +1 ] ) ) );
				pr ( seq ( 1, 22, pol ( [ +0, +0, +0, +1 ] ) ) );
				pr ( seq ( 1, 21, pol ( [ +1, +3, +3, +1 ] ) ) );
				pr ( seq ( 2, 23, pol ( [ +0, +0, +0, +1 ] ) ) );

				pr ( seq ( 0, 21, pol ( [ +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ -1, +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ +1, -2, +1 ] ) ) );
				pr ( seq ( 0, 21, pol ( [ -1, +3, -3, +1 ] ) ) );
				pr ( seq ( 1, 22, pol ( [ +0, +0, +0, +1 ] ) ) );
				pr ( seq ( 1, 21, pol ( [ -1, +3, -3, +1 ] ) ) );
				pr ( seq ( 2, 23, pol ( [ +0, +0, +0, +1 ] ) ) );
			}

		</script>

	</body>

</html>
